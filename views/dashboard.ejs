<!DOCTYPE html>
<html lang="en">
<head>
    <%- include('head') %>
    <title>Dashboard</title>
    <link rel="stylesheet" href="/css/style.css">
</head>
<body>
    <%- include('nav') %>
    <main>
        <h2>Admin Panel</h2>
        <p>Build perfect solar quotations</p>
        <div class="content">
            <div class="form">
        <button onclick="window.location.href='/admin/add-product'"><strong>+</strong> Add Product</button>
        <table border="1" cellpadding="3" class="table  table-striped table-bordered" style="font-size: 15px;">
        <thead>
        <tr>
            <th class="table-dark" style="width: 5%;">Sr.</th>
            <th class="table-dark desc" style="width: 50%;">Description</th>
            <th class="table-dark" style="width: 10%;">Price</th>
            <th class="table-dark"style="width: 10%;">Cost</th>
            <th class="table-dark"style="width: 10%;">Category</th>
            <th class="table-dark"style="width: 10%;">Actions</th>
        </tr>
        </thead>
        <tbody class="table-group-divider">  
        <% products.forEach(product => { %>
        <tr>
        <td data-label="Sr."><%= product.serial_no %></td>
        <td data-label="Description">
            <%= product.description %>
        </td>
        <td data-label="Price">
            <%= product.price.toLocaleString() %>
        </td>
        <td data-label="Cost">
            <%= product.cost.toLocaleString() %>
        </td>
        <td data-label="Category">
            <%= product.category_name %>
        </td>
        <td data-label="Actions">
            <a href="/admin/edit-product/<%= product.serial_no %>" >
                <i class="fa-regular fa-pen-to-square"></i>
            </a>
            <a href="/admin/delete-product/<%= product.serial_no %>"
            onclick="return confirm('Delete this product?')" 
            style="color:red;">
                <i class="fa-regular fa-trash-can"></i>
            </a>
        </td>
    </tr>
        <% }) %>
        </tbody>
       </table>
            </div>
            <div><p>I'm empty now</p></div>
        </div>
    </main>
 <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous"></script>
<script>
function handleResize() {
  const table = document.querySelector('.table');
  const tbody = document.querySelector('tbody')
  if (window.innerWidth <= 768) {
    table.classList.remove('table-striped');
    tbody.classList.remove('table-group-divider');
  } else {
    table.classList.add('table-striped');
    tbody.classList.add('table-group-divider');
  }
}

window.addEventListener('resize', handleResize);
window.addEventListener('load', handleResize);
</script>
<%- include('footer') %>
</body>
</html>